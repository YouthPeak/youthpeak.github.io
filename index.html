<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Youth Peak Training Camp</title>

  <link rel="icon" href="./images/favicon.png" type="image/png">
  <link rel="apple-touch-icon" sizes="180x180" href="./images/apple_icon.png">

  <style>
    :root{
      --bg:#071026;
      --page:#fff;
      --text:#111;
      --muted:#f3f6fb;
      --accent:#1976d2;
      --shadow:0 14px 40px rgba(15,23,42,0.08);
      --easing:cubic-bezier(.2,.9,.2,1);
      --bullet-bg: rgba(255,255,255,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:"Segoe UI",Roboto,Arial,Helvetica,sans-serif;-webkit-font-smoothing:antialiased}
    body{background:var(--bg); color:var(--text); overflow-x:hidden;}

/* 粒子画布：放在最底层，不遮挡 hero 背景或文字 */
#particleCanvas{
  position:fixed;
  inset:0;
  z-index:-1;            /* <<-- 关键：放到最底层 */
  pointer-events:none;
  mix-blend-mode:screen;
}

/* 头栏 */
.topbar{
  position:relative;
  z-index:120;
  height:64px;
  display:flex;
  align-items:center;
  gap:12px;
  padding:0 18px;
  background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));
  color:#fff;
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255,255,255,0.04);
}
.logo img{ height:36px; border-radius:6px; display:block; }
.bullet-container{ flex:1 1 auto; display:flex; justify-content:center; align-items:center; pointer-events:none; }
.bullet-frame{ display:none; align-items:center; padding:10px 36px; gap:12px; background:var(--bullet-bg); border-radius:999px; border:1px solid rgba(255,255,255,0.12); backdrop-filter:blur(8px); box-shadow:0 10px 28px rgba(0,0,0,0.28); color:#fff; max-width:88vw; overflow:hidden; white-space:nowrap; }

/* 粒子开关 */
.controls{ flex:0 0 auto; display:flex; align-items:center; gap:12px; }
.particle-toggle{ background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.09); color:#fff; padding:6px 10px; border-radius:10px; cursor:pointer; font-weight:700; }

/* Hero：使用 hero.jpg 作为背景（cover） */
header.hero{
  position:relative;
  z-index:10;
  min-height:560px;
  height: calc(100vh - 64px);
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:48px 20px;
  background-image: url('./images/hero.jpg'); /* <<-- 确保图片在 images/ */
  background-position: center;
  background-size: cover;
  background-repeat: no-repeat;
  background-attachment: scroll;
}
.hero::before{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,0.45), rgba(0,0,0,0.28));
  z-index:0;
}
.hero-inner{ position:relative; z-index:2; max-width:1200px; padding:28px; }

/* 主副标题更大、行高足够、动画完整 */
.hero-title{
  margin:0;
  font-weight:900;
  color:#fff;
  font-size:5.2rem;      /* 更大 */
  line-height:1.14;
  opacity:0;
  transform:translateY(10px) scale(.995);
  animation:heroIn .8s var(--easing) .12s forwards;
}
.typewriter span{ display:inline-block; clip-path: inset(0 100% 0 0); animation:reveal 2600ms steps(40,end) .2s forwards; }
@keyframes reveal{ to{ clip-path: inset(0 0 0 0) } }
.typewriter::after{ content:""; display:inline-block; width:2px; height:1.04em; margin-left:10px; background:#fff; vertical-align:baseline; animation:blink .8s steps(1,end) infinite; }
.typewriter.done::after{ opacity:0; }
@keyframes blink{50%{opacity:0}}
@keyframes heroIn{ to{ opacity:1; transform:translateY(0) scale(1) } }

.hero-sub{
  margin-top:18px;
  color:#f0f6fa;
  font-size:1.3rem;
  font-weight:800;
  letter-spacing:.22em;
  text-transform:uppercase;
  opacity:0;
  transform:translateY(28px);
  animation:subIn 1s var(--easing) .9s forwards;
}
@keyframes subIn{ to{ opacity:1; transform:translateY(0)} }

/* 选项区 */
.tab-area{ background:var(--page); border-radius:18px 18px 0 0; padding:28px 20px 36px; box-shadow:0 -8px 30px rgba(15,23,42,0.06); margin-top:0; z-index:8; position:relative;}
.tabs-row{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:0 auto 22px; max-width:1200px; }
.tab{ padding:12px 22px; border-radius:12px; background:#f3f6fb; font-weight:800; cursor:pointer; transition:transform .18s linear; }
.tab.active{ background:linear-gradient(90deg,#111,#333); color:#fff; transform:translateY(-3px) }
.content-area{ max-width:1200px; margin:0 auto; padding:14px; min-height:640px; position:relative; z-index:6; }
.panel{ position:absolute; inset:0; padding:30px; background:#fff; border-radius:12px; box-shadow:var(--shadow); opacity:0; transform:translateY(22px); pointer-events:none; transition:opacity .38s ease, transform .38s ease; overflow:auto; }
.panel.active{ opacity:1; transform:translateY(0); pointer-events:auto; }

/* footer placeholder */
.footer{ padding:36px 20px; color:#cfe9ff; background:#061122; text-align:center; }

/* responsive */
@media(max-width:900px){
  .hero-title{ font-size:3.8rem }
  .hero-sub{ font-size:1.05rem }
}
@media(max-width:560px){
  .hero-title{ font-size:2.8rem }
  .bullet-frame{ padding:8px 18px; max-width:94vw }
}
  </style>
</head>
<body>

  <!-- 粒子画布在最底层 (z-index:-1)，不会覆盖 hero.jpg -->
  <canvas id="particleCanvas" aria-hidden="true"></canvas>

  <!-- 头栏 -->
  <header class="topbar">
    <div class="logo" title="Youth Peak">
      <img src="./images/apple_icon.png" alt="logo">
    </div>

    <div class="bullet-container">
      <div class="bullet-frame" id="bulletFrame" role="status" aria-hidden="true">
        <div class="bullet-text" id="bulletText"></div>
      </div>
    </div>

    <div class="controls">
      <button id="particleToggle" class="particle-toggle">粒子：开</button>
    </div>
  </header>

  <!-- Hero（确保 hero.jpg 可见） -->
  <main>
    <section class="hero" role="region" aria-label="Hero 区">
      <div class="hero-inner">
        <h1 class="hero-title"><span class="typewriter"><span>Youth Peak Training Camp</span></span></h1>
        <p class="hero-sub">PEAK THE PASSION</p>
      </div>
    </section>

    <!-- 选项区 -->
    <section class="tab-area">
      <div class="tabs-row" id="tabsRow">
        <div class="tab active" data-index="0">创营理念</div>
        <div class="tab" data-index="1">人员构成</div>
        <div class="tab" data-index="2">训练集锦</div>
        <div class="tab" data-index="3">联系我们</div>
      </div>

      <div class="content-area">
        <div class="panel active" id="panel-0">
          <h3>创营理念</h3>
          <p><strong>Youth Peak</strong> 由一群热爱中长跑的青少年跑者共同创立，专注于 <strong>800 米至 10000 米</strong> 项目的系统化训练与能力提升。</p>
          <p>……（内容省略）</p>
        </div>
        <div class="panel" id="panel-1"><h3>人员构成</h3><p>11111</p></div>
        <div class="panel" id="panel-2"><h3>训练集锦</h3><p>11111</p></div>
        <div class="panel" id="panel-3"><h3>联系我们</h3><p>11111</p></div>
      </div>
    </section>

    <footer class="footer">Footer placeholder</footer>
  </main>

<script>
/* 选项卡切换 */
document.querySelectorAll('.tab').forEach((tab, i)=>{
  tab.addEventListener('click', ()=>{
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p=>p.classList.remove('active'));
    tab.classList.add('active');
    document.querySelectorAll('.panel')[i].classList.add('active');
  });
});

/* 打字动画结束后隐藏光标 */
setTimeout(()=> document.querySelector('.typewriter').classList.add('done'), 2600 + 200);

/* 单一弹幕逻辑（头栏） */
(function(){
  const frame = document.getElementById('bulletFrame');
  const text = document.getElementById('bulletText');
  const msgs = [
    '月抛训练营欢迎每一位热爱田径的人',
    '献给所有田径人——想做就大胆去做，迎接属于我们自己的浪漫'
  ];
  let last = -1;
  const runMs = 9000;   // 慢速
  const gapMs = 20000;  // 间隔较长

  function pick(){
    let i = Math.floor(Math.random()*msgs.length);
    if(i===last) i = (i+1)%msgs.length;
    last = i; return i;
  }

  // 动态 keyframes injection for movement
  const style = document.createElement('style');
  style.textContent = `@keyframes bulletMove{ from{transform:translateX(40%)} to{transform:translateX(-140%)} }`;
  document.head.appendChild(style);

  function play(){
    const idx = pick();
    text.textContent = msgs[idx];
    frame.style.display = 'flex';
    frame.setAttribute('aria-hidden','false');
    text.style.animation = `bulletMove ${runMs}ms linear forwards`;
    setTimeout(()=>{
      text.style.animation = '';
      frame.style.display = 'none';
      frame.setAttribute('aria-hidden','true');
      setTimeout(play, gapMs - runMs);
    }, runMs);
  }
  setTimeout(play, 1200);
})();

/* 粒子背景（简洁、在最底层） */
(function(){
  const canvas = document.getElementById('particleCanvas');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  let w=0,h=0,dpr=Math.max(1,window.devicePixelRatio||1);
  const maxParticles = 36;
  let particles = [], animId=null;
  const toggle = document.getElementById('particleToggle');
  let enabled = localStorage.getItem('particles-enabled');
  enabled = enabled===null? true : enabled==='true';
  toggle.textContent = enabled? '粒子：开' : '粒子：关';
  function resize(){
    w = innerWidth; h = innerHeight;
    canvas.width = Math.round(w * dpr);
    canvas.height = Math.round(h * dpr);
    canvas.style.width = w+'px'; canvas.style.height = h+'px';
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener('resize', resize, {passive:true});
  function rand(a,b){ return Math.random()*(b-a)+a; }
  function init(){
    particles=[];
    for(let i=0;i<maxParticles;i++){
      particles.push({ x:rand(0,w), y:rand(-h*0.5,h), vx:rand(-0.2,0.2), vy:rand(0.2,0.7), size:rand(2,6), alpha:rand(0.12,0.28), hue:rand(180,320) });
    }
  }
  function step(){
    ctx.clearRect(0,0,w,h);
    for(let p of particles){
      p.vy += 0.0009;
      p.x += p.vx;
      p.y += p.vy;
      if(p.x < -50) p.x = w+50;
      if(p.x > w+50) p.x = -50;
      if(p.y - p.size > h + 60){
        p.x = rand(0,w); p.y = rand(-80,-10); p.vx = rand(-0.2,0.2); p.vy = rand(0.2,0.6); p.size = rand(2,6);
      }
      ctx.beginPath();
      const g = ctx.createLinearGradient(p.x, p.y, p.x + p.vx*6, p.y + p.size*2);
      g.addColorStop(0, `hsla(${p.hue},85%,65%,${p.alpha})`);
      g.addColorStop(1, 'rgba(255,255,255,0)');
      ctx.fillStyle = g;
      ctx.ellipse(p.x,p.y,p.size,p.size*0.6,0,0,Math.PI*2);
      ctx.fill();
    }
    animId = requestAnimationFrame(step);
  }
  function start(){ cancelAnimationFrame(animId); resize(); init(); animId = requestAnimationFrame(step); }
  function stop(){ cancelAnimationFrame(animId); animId=null; ctx.clearRect(0,0,w,h); }
  toggle.addEventListener('click', ()=>{
    enabled = !enabled; localStorage.setItem('particles-enabled', enabled); toggle.textContent = enabled? '粒子：开' : '粒子：关';
    if(enabled) start(); else stop();
  });
  if(enabled) start(); else stop();
})();
</script>
</body>
</html>
